## 1. О Label Studio (About Label Studio)

*   **Назначение:** Предоставление универсального интерфейса для аннотирования различных типов данных (изображения, текст, аудио, видео, временные ряды, HTML и др.) с целью создания наборов данных для обучения моделей машинного обучения.
*   **Ключевые особенности:**
    *   **Гибкая настройка интерфейса разметки:** С помощью XML-подобной конфигурации или визуального конструктора можно создавать практически любой интерфейс для конкретной задачи.
    *   **Поддержка множества типов данных:** Изображения (классификация, детекция, сегментация), текст (NER, классификация, отношения), аудио (транскрипция, классификация, диаризация) и многое другое.
    *   **Интеграция с ML-моделями:** Возможность подключения моделей машинного обучения для предразметки (pre-annotation) и активного обучения (active learning).
    *   **Open-source:** Бесплатное использование и возможность доработки под свои нужды.
    *   **Командная работа:** Поддержка нескольких аннотаторов, контроль качества.

## 2. Быстрый старт (Quick Start)

Обычно процесс работы в Label Studio выглядит так:

1.  **Установка и запуск** Label Studio.
2.  **Создание нового проекта.**
3.  **Импорт данных,** которые необходимо разметить.
4.  **Настройка интерфейса разметки (Labeling Interface):** Определение того, как будут выглядеть данные и какие инструменты будут доступны аннотатору. Можно использовать готовые шаблоны или создать свою конфигурацию.
5.  **Разметка данных (Annotate Tasks):** Аннотаторы выполняют разметку задач.
6.  **Экспорт размеченных данных** в нужном формате.

## 3. Установка (Installation)

Существует несколько способов установки Label Studio:

*   **С помощью pip (рекомендуется для Python-разработчиков):**
    ```bash
    pip install label-studio
    label-studio
    ```
    Желательно использовать виртуальное окружение.

*   **С помощью Docker (рекомендуется для быстрого старта и изоляции):**
    ```bash
    docker run -p 8080:8080 -v $(pwd)/mydata:/label-studio/data heartexlabs/label-studio:latest
    ```
    *   `-p 8080:8080`: пробрасывает порт 8080 контейнера на порт 8080 хоста.
    *   `-v $(pwd)/mydata:/label-studio/data`: монтирует локальную папку `mydata` в папку `/label-studio/data` внутри контейнера для сохранения данных проекта.

*   **Из исходного кода (для разработчиков, желающих внести изменения):**
    Инструкции доступны в официальной документации.

*   **Облачные версии/Сервисы:** Например, HumanSignal (ранее Heartex) предлагает облачную платформу на базе Label Studio.

После запуска Label Studio обычно доступен в браузере по адресу `http://localhost:8080`.

## 4. Создание проекта (Create Project)

1.  В главном интерфейсе Label Studio нажмите кнопку **"Create Project"**.
2.  **Введите имя проекта (Project Name)** и, опционально, описание.
3.  **Настройте интерфейс разметки (Labeling Setup):**
    *   **Использовать шаблон (Use a template):** Выберите из списка готовых шаблонов для типовых задач (например, "Image Bounding Boxes", "Text Classification").
    *   **Создать свой (Custom template / XML):** Напишите или отредактируйте XML-конфигурацию интерфейса. Это позволяет максимально гибко настроить отображение данных и инструменты разметки. Существует также визуальный конфигуратор.
    *   **Пример XML для разметки прямоугольниками:**
        ```xml
        <View>
          <Image name="image" value="$image_url"/>
          <RectangleLabels name="label" toName="image">
            <Label value="ObjectA" background="green"/>
            <Label value="ObjectB" background="blue"/>
          </RectangleLabels>
        </View>
        ```
4.  Сохраните настройки проекта.

## 5. Добавление данных (Импорт / Add Project Storage)

После создания проекта необходимо загрузить данные для разметки:

*   **Через UI (кнопка "Import"):**
    *   **Загрузка файлов (Upload Files):** С локального компьютера.
    *   **Загрузка по URL:** Если ваши данные доступны по прямым ссылкам.
    *   Поддерживаются различные форматы: CSV/TSV для структурированных ссылок на данные, JSON для задач с предразметкой, а также прямая загрузка изображений, аудио и т.д.

*   **Подключение облачного хранилища (Cloud Storage - в настройках проекта):**
    *   **Amazon S3, Google Cloud Storage, Microsoft Azure Blob Storage.**
    *   Позволяет Label Studio синхронизировать данные напрямую из вашего облачного бакета.
    *   Требуется настройка прав доступа и учетных данных.

Данные представляются в виде **задач (tasks)**. Каждая задача – это одна единица данных для разметки (например, одно изображение).

## 6. Интеграция с машинным обучением (Machine Learning Integration)

Label Studio позволяет подключать ML-модели (ML Backend) для:

*   **Предварительной разметки (Pre-annotation):** Модель автоматически генерирует начальные аннотации, которые затем проверяются и корректируются человеком. Это значительно ускоряет процесс.
*   **Активного обучения (Active Learning):** Модель помогает выбирать наиболее информативные задачи для разметки, чтобы улучшить свою производительность с минимальными усилиями по разметке.
*   **Непрерывного обучения:** По мере разметки новых данных модель может дообучаться.

**Как это работает:**

1.  Вы разрабатываете и запускаете **ML Backend** – это отдельный скрипт или сервис (часто на Python с использованием Label Studio SDK), который реализует логику вашей модели.
2.  В настройках проекта Label Studio (`Settings -> Machine Learning`) вы указываете URL вашего запущенного ML Backend.
3.  Label Studio будет отправлять задачи на ML Backend для получения предсказаний или запросов на обучение.

Label Studio SDK предоставляет утилиты для создания таких бэкендов.

## 7. Ключевые элементы интерфейса разметки (кратко)

Интерфейс разметки в Label Studio определяется XML-конфигурацией. Основные теги:

*   `<View>`: Корневой тег, обрамляющий всю конфигурацию.
*   **Теги объектов (Object Tags):** Определяют, какой тип данных отображается.
    *   `<Image name="img" value="$image_url" />`
    *   `<Text name="txt" value="$text_content" />`
    *   `<Audio name="aud" value="$audio_url" />`
*   **Теги контроля (Control Tags):** Определяют инструменты разметки и типы меток.
    *   `<RectangleLabels name="tags" toName="img"> <Label value="Cat"/> <Label value="Dog"/> </RectangleLabels>` (для прямоугольников)
    *   `<PolygonLabels name="poly" toName="img"> ... </PolygonLabels>` (для полигонов)
    *   `<Choices name="sentiment" toName="txt"> <Choice value="Positive"/> <Choice value="Negative"/> </Choices>` (для классификации)
    *   `<TextArea name="transcription" toName="aud"/>` (для ввода текста)

Комбинируя эти теги, можно создавать сложные интерфейсы.

## 8. Экспорт данных 

После завершения разметки (или на любом этапе) данные можно экспортировать:

1.  На странице проекта нажмите кнопку **"Export"**.
2.  **Выберите формат экспорта:**
    *   **JSON:** Наиболее полный формат, содержит все детали аннотаций, информацию о разметчиках и т.д. Рекомендуется для большинства случаев.
    *   **JSON-MIN:** Упрощенный JSON.
    *   **CSV/TSV:** Табличный формат.
    *   **COCO, Pascal VOC, YOLO:** Популярные форматы для задач компьютерного зрения.
    *   И другие специфичные форматы.

Экспортированные файлы можно использовать для обучения ML-моделей.

## 9. Основные преимущества Label Studio

*   **Гибкость:** Настройка интерфейса под любую задачу.
*   **Универсальность:** Поддержка множества типов данных.
*   **Интеграция с ML:** Возможности для автоматизации и ускорения разметки.
*   **Open-source и активное сообщество:** Постоянное развитие и поддержка.

---
